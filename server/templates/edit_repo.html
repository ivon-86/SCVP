{% extends "layout.html" %}

{% block title %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å {{ repo.name }} - SCVP{% endblock %}

{% block extra_css %}
<style>
    .edit-container {
        max-width: 800px;
        margin: 0 auto;
        display: flex;
        gap: 30px;
    }
    
    .edit-box {
        flex: 1;
        border: 3px double;
        padding: 30px;
    }
    
    .info-box {
        flex: 1;
        border: 3px double;
        padding: 30px;
    }
    
    .form-group {
        margin-bottom: 20px;
    }
    
    .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
    }
    
    .form-control {
        width: 100%;
        padding: 10px;
        border: 2px solid;
        font-family: 'Courier New', monospace;
        font-size: 16px;
    }
    
    textarea.form-control {
        min-height: 100px;
        resize: vertical;
    }
    
    .form-control:focus {
        outline: none;
        border-color: #333;
        box-shadow: 0 0 0 2px rgba(0,0,0,0.1);
    }
    
    .btn {
        display: inline-block;
        padding: 10px 20px;
        text-decoration: none;
        border: 2px solid;
        background-color: transparent;
        color: inherit;
        cursor: pointer;
        font-family: 'Courier New', monospace;
        font-size: 16px;
        text-align: center;
    }
    
    .btn:hover {
        background-color: inherit;
        color: inherit;
    }
    
    .btn-primary {
        background-color: #000;
        color: #fff;
    }
    
    .btn-primary:hover {
        background-color: #333;
        border-color: #333;
    }
    
    .btn-secondary {
        background-color: #f0f0f0;
    }
    
    .form-actions {
        display: flex;
        gap: 10px;
        margin-top: 30px;
    }
    
    .checkbox-group {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 15px;
    }
    
    .checkbox-group input[type="checkbox"] {
        width: auto;
    }
    
    .danger-zone {
        margin-top: 40px;
        padding: 20px;
        border: 2px solid #FF0000;
        background-color: rgba(255,0,0,0.1);
    }
    
    @media (max-width: 768px) {
        .edit-container {
            flex-direction: column;
        }
        
        .form-actions {
            flex-direction: column;
        }
        
        .form-actions .btn {
            width: 100%;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="edit-container">
    <div class="edit-box">
        <h1>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π</h1>
        <p style="color: #666; margin-bottom: 30px;">–ò–∑–º–µ–Ω–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ "{{ repo.name }}"</p>
        
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                    {% for category, message in messages %}
                        <div class="flash {{ category }}">{{ message }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        
        <form method="POST" action="{{ url_for('main.edit_repo', repo_id=repo.id) }}">
            {{ form.hidden_tag() }}
            
            <div class="form-group">
                {{ form.name.label }}
                {{ form.name(class="form-control") }}
                {% if form.name.errors %}
                    <small style="color: #721c24;">
                        {% for error in form.name.errors %}
                            {{ error }}<br>
                        {% endfor %}
                    </small>
                {% else %}
                    <small>–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º —Å—Ä–µ–¥–∏ –≤–∞—à–∏—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤</small>
                {% endif %}
            </div>
            
            <div class="form-group">
                {{ form.description.label }}
                {{ form.description(class="form-control") }}
                {% if form.description.errors %}
                    <small style="color: #721c24;">
                        {% for error in form.description.errors %}
                            {{ error }}<br>
                        {% endfor %}
                    </small>
                {% endif %}
            </div>
            
            <div class="checkbox-group">
                {{ form.is_public() }}
                {{ form.is_public.label }}
            </div>
            
            <div class="form-actions">
                {{ form.submit(class="btn-primary") }}
                <a href="{{ url_for('main.repo_view', repo_id=repo.id) }}" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</a>
            </div>
        </form>
        
        <div class="danger-zone">
            <h3 style="color: #FF0000; margin-top: 0;">‚ö†Ô∏è –û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞</h3>
            <p>–£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å. –í—Å–µ —Ñ–∞–π–ª—ã –∏ –∏—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤ –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã.</p>
            <a href="{{ url_for('main.delete_repo', repo_id=repo.id) }}" 
               class="btn" 
               style="border-color: #FF0000; color: #FF0000;"
               onclick="return confirm('–í–ù–ò–ú–ê–ù–ò–ï: –í—ã —Ç–æ—á–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π \"{{ repo.name }}\"? –í—Å–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª–µ–Ω—ã.')">
                üóëÔ∏è –£–¥–∞–ª–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
            </a>
        </div>
    </div>
    
    <div class="info-box">
        <h3>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏</h3>
        
        <div style="margin-bottom: 20px;">
            <p><strong>–¢–µ–∫—É—â–µ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:</strong> {{ repo.name }}</p>
            <p><strong>–¢–µ–∫—É—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:</strong> {{ repo.description if repo.description else '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è' }}</p>
            <p><strong>–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:</strong> 
                {% if repo.is_public %}
                    <span style="color: #155724;">‚úÖ –ü—É–±–ª–∏—á–Ω—ã–π</span>
                {% else %}
                    <span style="color: #721c24;">üîí –ü—Ä–∏–≤–∞—Ç–Ω—ã–π</span>
                {% endif %}
            </p>
        </div>
        
        <div style="margin-bottom: 20px;">
            <h4>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h4>
            <ul>
                <li><strong>–°–æ–∑–¥–∞–Ω:</strong> {{ repo.created_at.strftime('%d.%m.%Y %H:%M') }}</li>
                <li><strong>–û–±–Ω–æ–≤–ª—ë–Ω:</strong> {{ repo.updated_at.strftime('%d.%m.%Y %H:%M') }}</li>
                <li><strong>–í–ª–∞–¥–µ–ª–µ—Ü:</strong> {{ repo.owner.username }}</li>
            </ul>
        </div>
        
        <div>
            <h4>üí° –ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è?</h4>
            <ul>
                <li><strong>–ù–∞–∑–≤–∞–Ω–∏–µ:</strong> –ò–∑–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è</li>
                <li><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ</li>
                <li><strong>–°—Ç–∞—Ç—É—Å:</strong> 
                    <ul>
                        <li><strong>–ü—É–±–ª–∏—á–Ω—ã–π:</strong> –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤–∏–¥—è—Ç –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</li>
                        <li><strong>–ü—Ä–∏–≤–∞—Ç–Ω—ã–π:</strong> –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤–∏–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ –≤—ã</li>
                    </ul>
                </li>
            </ul>
        </div>
        
        <div style="margin-top: 30px; padding: 15px; border: 2px solid; background-color: rgba(0,0,0,0.05);">
            <h4>üìÅ –§–∞–π–ª—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è</h4>
            <p>–ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç —Ñ–∞–π–ª—ã. –û–Ω–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.</p>
            <a href="{{ url_for('main.repo_view', repo_id=repo.id) }}" class="btn" style="margin-top: 10px;">
                üìÑ –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ñ–∞–π–ª–∞–º
            </a>
        </div>
    </div>
</div>
{% endblock %}